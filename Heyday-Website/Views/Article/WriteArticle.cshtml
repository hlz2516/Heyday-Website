@model Heyday_Website.ViewModels.WriteArticleDto

@section csses{
    <style>
        .comments {
            width: 100%; /*自动适应父布局宽度*/
            overflow: auto;
            word-break: break-all;
        }
    </style>

}

@section scripts{ 
    <script>
        $("body").removeClass("text-center");
        function publish() {
            $('#form1').attr("action", "/Article/Publish");
            $.ajax({
                type: "post",
                dataType: "text",
                url: "/Article/Publish",
                data: $('#form1').serialize(),
                success: function (result) {
                    if (result != null) {
                        $('#SaveTime').val(result);
                        alert("您的文章已发布！请去主页查看");
                        $('#form1').attr("action", "/Article/WriteArticle");
                    }
                },
                error: function () {
                    console.log("发布失败，请联系管理员");
                }
            });
        }
    </script>
}

<div class="container-fluid">
    <form asp-controller="Article" asp-action="WriteArticle" method="post" id="form1">
        <div class="form-group">
            <label asp-for="Title">标题</label>
            <input type="text" class="form-control" asp-for="Title">
        </div>
        <div class="form-group">
            <label asp-for="Content">内容</label>
            <br />
            <textarea class="comments" rows="20" asp-for="Content"></textarea>
        </div>
        <div>
            <input type="hidden" asp-for="Id" />
            <input type="hidden" asp-for="Category" />
            <input type="hidden"  asp-for="SaveTime" value="@DateTime.Now" />
        </div>
        <button type="button" class="btn btn-primary" onclick="publish()">发布</button>
        <button type="submit" class="btn btn-primary">保存</button>
        <button type="button" class="btn btn-primary">返回</button>
    </form>
</div>
